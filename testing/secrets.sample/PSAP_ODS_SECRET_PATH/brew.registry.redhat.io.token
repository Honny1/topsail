<raw value of the token generated by `podman login` to access brew.registry.redhat.io>
# cleanup the kerberos contexts, to avoid conflicts with @REDHAT.COM
kdestroy -A
kinit kpouget@IPA.REDHAT.COM

# generate a new token
curl --negotiate -u : -X POST -H 'Content-Type: application/json' --data '{"description":"openshift 4 testing"}' https://employee-token-manager.registry.redhat.com/v1/tokens -s | jq 
# or access an existing one
curl --negotiate -u : https://employee-token-manager.registry.redhat.com/v1/tokens | jq

{
  "name": "31294190-8586-11e9-9611-001a4a0a0044.5x6r.e0d01d",
  "description": "openshift 4 testing",
  "credentials": {
    "username": "REDACTED",
    "password": "REDACTED"
  },
  "created": "2022-12-05T13:54:08Z"
}

# use podman to login
podman login \
--username "$(cat token | jq -r .credentials.username)" \
--password "$(cat token | jq -r .credentials.password)" \
--authfile auth \
 brew.registry.redhat.io
